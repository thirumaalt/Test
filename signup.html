<!DOCTYPE html>
<html>
<head>
  <title>AWS Amplify Signup</title>
</head>
<body>
  <h2>Sign Up</h2>
  <input id="username" placeholder="Username" />
  <input id="email" placeholder="Email" />
  <input id="password" type="password" placeholder="Password" />
  <button onclick="signUp()">Sign Up</button>

  <h2>Confirm</h2>
  <input id="code" placeholder="Verification Code" />
  <button onclick="confirmSignUp()">Confirm</button>

  <!-- âœ… Load Amplify from Cloudflare -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aws-amplify/4.3.21/aws-amplify.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (!window.Amplify) {
        alert("Amplify did not load");
        return;
      }

      Amplify.configure({
        Auth: {
          region: 'ap-south-1',
          userPoolId: 'ap-south-1_AWVfn9P3b',
          userPoolWebClientId: '7do93ckljrsk5s9tbgtc0dv553',
          mandatorySignIn: true,
        }
      });

      window.signUp = async function () {
        const username = document.getElementById("username").value;
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        try {
          await Amplify.Auth.signUp({
            username,
            password,
            attributes: { email }
          });
          alert("Signed up! Check your email.");
        } catch (err) {
          alert("Sign up error: " + err.message);
        }
      };

      window.confirmSignUp = async function () {
        const username = document.getElementById("username").value;
        const code = document.getElementById("code").value;
        try {
          await Amplify.Auth.confirmSignUp(username, code);
          alert("Confirmed!");
        } catch (err) {
          alert("Confirm error: " + err.message);
        }
      };
    });
  </script>
</body>
</html>
